<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Estru3D</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<link type="text/css" rel="stylesheet" href="main.css">
		<style>
			body {
				background-color: #fff;
				color: #444;
			}
			a {
				color: #08f;
			}
		</style>
	</head>
	<body>

		<div id="info">
		Estru3D WebGL VR Version 0.1
		</div>

		<div id="container"></div>



		<script type="module">

		// Variables globales?

		var effect, controls;

		// Pedido de origen cruzado bloqueado: La política de mismo origen no permite leer el recurso remoto
		// en file:///home/martin/node_modules/three/examples/build/three.module.js. (Razón: pedido CORS no es http).

		// Simplemente hacer referncia remota a las librerias.

			import * as THREE from 'https://threejs.org/build/three.module.js';

			import { OrbitControls } from 'https://threejs.org/examples/jsm/controls/OrbitControls.js';

			import { VRButton } from 'https://threejs.org/examples/jsm/webxr/VRButton.js';
			import { TubePainter } from 'https://threejs.org/examples/jsm/misc/TubePainter.js'
			import Stats from 'https://threejs.org/examples/jsm/libs/stats.module.js';

			import { TrackballControls } from 'https://threejs.org/examples/jsm/controls/TrackballControls.js';
			import { BufferGeometryUtils } from 'https://threejs.org/examples/jsm/utils/BufferGeometryUtils.js';

			  var container;
				var camera, scene, renderer;
				var controller1, controller2;

				var cursor = new THREE.Vector3();

				var controls;

				init();
				animate();

				function init() {

					container = document.createElement( 'div' );
					document.body.appendChild( container );

					scene = new THREE.Scene();
					scene.background = new THREE.Color( 0xffffff );

					camera = new THREE.PerspectiveCamera( 50, window.innerWidth / window.innerHeight, 0.01, 50 );
					camera.position.set( 0, 1.6, 3 );

					controls = new OrbitControls( camera, container );
					controls.target.set( 0, 1.6, 0 );
					controls.update();

					var geometry = new THREE.BoxBufferGeometry( 0.5, 0.8, 0.5 );
					var material = new THREE.MeshStandardMaterial( {
						color: 0x444444,
						roughness: 1.0,
						metalness: 0.0
					} );
					var table = new THREE.Mesh( geometry, material );
					table.position.y = 0.35;
					table.position.z = 0.85;
					scene.add( table );

					var geometry = new THREE.PlaneBufferGeometry( 4, 4 );
					var material = new THREE.MeshStandardMaterial( {
						color: 0x222222,
						roughness: 1.0,
						metalness: 0.0
					} );
					var floor = new THREE.Mesh( geometry, material );
					floor.rotation.x = - Math.PI / 2;
					scene.add( floor );

					var grid = new THREE.GridHelper( 10, 20, 0x111111, 0x111111 );
					// grid.material.depthTest = false; // avoid z-fighting
					scene.add( grid );


					scene.add( new THREE.HemisphereLight( 0x888877, 0x777788 ) );

					var light = new THREE.DirectionalLight( 0xffffff, 0.5 );
					light.position.set( 0, 4, 0 );
					scene.add( light );

					//


					var painter1 = new TubePainter();
					scene.add( painter1.mesh );

					var painter2 = new TubePainter();
					scene.add( painter2.mesh );

					//

					renderer = new THREE.WebGLRenderer( { antialias: true } );
					renderer.setPixelRatio( window.devicePixelRatio );
					renderer.setSize( window.innerWidth, window.innerHeight );
					renderer.outputEncoding = THREE.sRGBEncoding;
					renderer.xr.enabled = true;
					container.appendChild( renderer.domElement );

					document.body.appendChild( VRButton.createButton( renderer ) );

					// controllers

					function onSelectStart() {

						this.userData.isSelecting = true;

					}

					function onSelectEnd() {

						this.userData.isSelecting = false;

					}

					function onSequeezeStart() {

						this.userData.isSqueezing = true;
						this.userData.positionAtSqueezeStart = this.position.y;
						this.userData.scaleAtSqueezeStart = this.scale.x;

					}

					function onSqueezeEned() {

						this.userData.isSqueezing = false;

					}

					controller1 = renderer.xr.getController( 0 );
					controller1.addEventListener( 'selectstart', onSelectStart );
					controller1.addEventListener( 'selectend', onSelectEnd );
					controller1.addEventListener( 'squeezestart', onSequeezeStart );
					controller1.addEventListener( 'squeezeend', onSqueezeEned );
					controller1.userData.painter = painter1;
					scene.add( controller1 );

					controller2 = renderer.xr.getController( 1 );
					controller2.addEventListener( 'selectstart', onSelectStart );
					controller2.addEventListener( 'selectend', onSelectEnd );
					controller2.addEventListener( 'squeezestart', onSequeezeStart );
					controller2.addEventListener( 'squeezeend', onSqueezeEned );
					controller2.userData.painter = painter2;
					scene.add( controller2 );

					//

					var geometry = new THREE.CylinderBufferGeometry( 0.01, 0.02, 0.08, 5 );
					geometry.rotateX( - Math.PI / 2 );
					var material = new THREE.MeshStandardMaterial( { flatShading: true } );
					var mesh = new THREE.Mesh( geometry, material );

					var pivot = new THREE.Mesh( new THREE.IcosahedronBufferGeometry( 0.01, 2 ) );
					pivot.name = 'pivot';
					pivot.position.z = - 0.05;
					mesh.add( pivot );

					controller1.add( mesh.clone() );
					controller2.add( mesh.clone() );



					// intentare dibujar muchas lineas de un BufferGeometry

				 // var material = new THREE.LineBasicMaterial({ color: 0x000fff });
				var material = new THREE.LineBasicMaterial({ vertexColors: true });// En vez de definir un color, usare un array de colores RGB


				var colores = [];

				var puntos = [];

				var vertices = [];
vertices = [ 0,0,0,0,0,0
,400.00,0.00,0.00,400.00,500.00,0.00
,0.00,500.00,0.00,400.00,500.00,0.00
,400.00,500.00,0.00,900.00,500.00,0.00
,400.00,500.00,0.00,400.00,800.00,0.00
,0.00,500.00,0.00,0.00,600.00,0.00
,34.27,600.00,0.00,0.00,600.00,0.00
,4.00,600.00,0.00,0.00,600.00,0.00
,3.43,600.57,0.00,0.00,600.00,0.00
,3.43,600.00,0.57,0.00,600.00,0.00
,2.86,600.00,0.00,0.00,600.00,0.00
,3.43,599.43,0.00,0.00,600.00,0.00
,3.43,600.00,-0.57,0.00,600.00,0.00
,400.00,500.69,0.00,400.00,500.00,0.00
,400.01,500.07,0.00,400.00,500.00,0.00
,400.00,500.08,0.00,400.00,500.00,0.00
,400.00,500.07,0.01,400.00,500.00,0.00
,399.99,500.07,0.00,400.00,500.00,0.00
,400.00,500.06,0.00,400.00,500.00,0.00
,400.00,500.07,-0.01,400.00,500.00,0.00
,413.16,500.69,0.00,413.16,500.00,0.00
,413.17,500.07,0.00,413.16,500.00,0.00
,413.16,500.08,0.00,413.16,500.00,0.00
,413.16,500.07,0.01,413.16,500.00,0.00
,413.15,500.07,0.00,413.16,500.00,0.00
,413.16,500.06,0.00,413.16,500.00,0.00
,413.16,500.07,-0.01,413.16,500.00,0.00
,426.32,500.69,0.00,426.32,500.00,0.00
,426.33,500.07,0.00,426.32,500.00,0.00
,426.32,500.08,0.00,426.32,500.00,0.00
,426.32,500.07,0.01,426.32,500.00,0.00
,426.30,500.07,0.00,426.32,500.00,0.00
,426.32,500.06,0.00,426.32,500.00,0.00
,426.32,500.07,-0.01,426.32,500.00,0.00
,439.47,500.69,0.00,439.47,500.00,0.00
,439.49,500.07,0.00,439.47,500.00,0.00
,439.47,500.08,0.00,439.47,500.00,0.00
,439.47,500.07,0.01,439.47,500.00,0.00
,439.46,500.07,0.00,439.47,500.00,0.00
,439.47,500.06,0.00,439.47,500.00,0.00
,439.47,500.07,-0.01,439.47,500.00,0.00
,452.63,500.69,0.00,452.63,500.00,0.00
,452.64,500.07,0.00,452.63,500.00,0.00
,452.63,500.08,0.00,452.63,500.00,0.00
,452.63,500.07,0.01,452.63,500.00,0.00
,452.62,500.07,0.00,452.63,500.00,0.00
,452.63,500.06,0.00,452.63,500.00,0.00
,452.63,500.07,-0.01,452.63,500.00,0.00
,465.79,500.69,0.00,465.79,500.00,0.00
,465.80,500.07,0.00,465.79,500.00,0.00
,465.79,500.08,0.00,465.79,500.00,0.00
,465.79,500.07,0.01,465.79,500.00,0.00
,465.78,500.07,0.00,465.79,500.00,0.00
,465.79,500.06,0.00,465.79,500.00,0.00
,465.79,500.07,-0.01,465.79,500.00,0.00
,478.95,500.69,0.00,478.95,500.00,0.00
,478.96,500.07,0.00,478.95,500.00,0.00
,478.95,500.08,0.00,478.95,500.00,0.00
,478.95,500.07,0.01,478.95,500.00,0.00
,478.94,500.07,0.00,478.95,500.00,0.00
,478.95,500.06,0.00,478.95,500.00,0.00
,478.95,500.07,-0.01,478.95,500.00,0.00
,492.11,500.69,0.00,492.11,500.00,0.00
,492.12,500.07,0.00,492.11,500.00,0.00
,492.11,500.08,0.00,492.11,500.00,0.00
,492.11,500.07,0.01,492.11,500.00,0.00
,492.09,500.07,0.00,492.11,500.00,0.00
,492.11,500.06,0.00,492.11,500.00,0.00
,492.11,500.07,-0.01,492.11,500.00,0.00
,505.26,500.69,0.00,505.26,500.00,0.00
,505.27,500.07,0.00,505.26,500.00,0.00
,505.26,500.08,0.00,505.26,500.00,0.00
,505.26,500.07,0.01,505.26,500.00,0.00
,505.25,500.07,0.00,505.26,500.00,0.00
,505.26,500.06,0.00,505.26,500.00,0.00
,505.26,500.07,-0.01,505.26,500.00,0.00
,518.42,500.69,0.00,518.42,500.00,0.00
,518.43,500.07,0.00,518.42,500.00,0.00
,518.42,500.08,0.00,518.42,500.00,0.00
,518.42,500.07,0.01,518.42,500.00,0.00
,518.41,500.07,0.00,518.42,500.00,0.00
,518.42,500.06,0.00,518.42,500.00,0.00
,518.42,500.07,-0.01,518.42,500.00,0.00
,531.58,500.69,0.00,531.58,500.00,0.00
,531.59,500.07,0.00,531.58,500.00,0.00
,531.58,500.08,0.00,531.58,500.00,0.00
,531.58,500.07,0.01,531.58,500.00,0.00
,531.57,500.07,0.00,531.58,500.00,0.00
,531.58,500.06,0.00,531.58,500.00,0.00
,531.58,500.07,-0.01,531.58,500.00,0.00
,544.74,500.69,0.00,544.74,500.00,0.00
,544.75,500.07,0.00,544.74,500.00,0.00
,544.74,500.08,0.00,544.74,500.00,0.00
,544.74,500.07,0.01,544.74,500.00,0.00
,544.73,500.07,0.00,544.74,500.00,0.00
,544.74,500.06,0.00,544.74,500.00,0.00
,544.74,500.07,-0.01,544.74,500.00,0.00
,557.89,500.69,0.00,557.89,500.00,0.00
,557.91,500.07,0.00,557.89,500.00,0.00
,557.89,500.08,0.00,557.89,500.00,0.00
,557.89,500.07,0.01,557.89,500.00,0.00
,557.88,500.07,0.00,557.89,500.00,0.00
,557.89,500.06,0.00,557.89,500.00,0.00
,557.89,500.07,-0.01,557.89,500.00,0.00
,571.05,500.69,0.00,571.05,500.00,0.00
,571.06,500.07,0.00,571.05,500.00,0.00
,571.05,500.08,0.00,571.05,500.00,0.00
,571.05,500.07,0.01,571.05,500.00,0.00
,571.04,500.07,0.00,571.05,500.00,0.00
,571.05,500.06,0.00,571.05,500.00,0.00
,571.05,500.07,-0.01,571.05,500.00,0.00
,584.21,500.69,0.00,584.21,500.00,0.00
,584.22,500.07,0.00,584.21,500.00,0.00
,584.21,500.08,0.00,584.21,500.00,0.00
,584.21,500.07,0.01,584.21,500.00,0.00
,584.20,500.07,0.00,584.21,500.00,0.00
,584.21,500.06,0.00,584.21,500.00,0.00
,584.21,500.07,-0.01,584.21,500.00,0.00
,597.37,500.69,0.00,597.37,500.00,0.00
,597.38,500.07,0.00,597.37,500.00,0.00
,597.37,500.08,0.00,597.37,500.00,0.00
,597.37,500.07,0.01,597.37,500.00,0.00
,597.36,500.07,0.00,597.37,500.00,0.00
,597.37,500.06,0.00,597.37,500.00,0.00
,597.37,500.07,-0.01,597.37,500.00,0.00
,610.53,500.69,0.00,610.53,500.00,0.00
,610.54,500.07,0.00,610.53,500.00,0.00
,610.53,500.08,0.00,610.53,500.00,0.00
,610.53,500.07,0.01,610.53,500.00,0.00
,610.51,500.07,0.00,610.53,500.00,0.00
,610.53,500.06,0.00,610.53,500.00,0.00
,610.53,500.07,-0.01,610.53,500.00,0.00
,623.68,500.69,0.00,623.68,500.00,0.00
,623.70,500.07,0.00,623.68,500.00,0.00
,623.68,500.08,0.00,623.68,500.00,0.00
,623.68,500.07,0.01,623.68,500.00,0.00
,623.67,500.07,0.00,623.68,500.00,0.00
,623.68,500.06,0.00,623.68,500.00,0.00
,623.68,500.07,-0.01,623.68,500.00,0.00
,636.84,500.69,0.00,636.84,500.00,0.00
,636.85,500.07,0.00,636.84,500.00,0.00
,636.84,500.08,0.00,636.84,500.00,0.00
,636.84,500.07,0.01,636.84,500.00,0.00
,636.83,500.07,0.00,636.84,500.00,0.00
,636.84,500.06,0.00,636.84,500.00,0.00
,636.84,500.07,-0.01,636.84,500.00,0.00
,650.00,500.69,0.00,650.00,500.00,0.00
,650.01,500.07,0.00,650.00,500.00,0.00
,650.00,500.08,0.00,650.00,500.00,0.00
,650.00,500.07,0.01,650.00,500.00,0.00
,649.99,500.07,0.00,650.00,500.00,0.00
,650.00,500.06,0.00,650.00,500.00,0.00
,650.00,500.07,-0.01,650.00,500.00,0.00
,663.16,500.69,0.00,663.16,500.00,0.00
,663.17,500.07,0.00,663.16,500.00,0.00
,663.16,500.08,0.00,663.16,500.00,0.00
,663.16,500.07,0.01,663.16,500.00,0.00
,663.15,500.07,0.00,663.16,500.00,0.00
,663.16,500.06,0.00,663.16,500.00,0.00
,663.16,500.07,-0.01,663.16,500.00,0.00
,676.32,500.69,0.00,676.32,500.00,0.00
,676.33,500.07,0.00,676.32,500.00,0.00
,676.32,500.08,0.00,676.32,500.00,0.00
,676.32,500.07,0.01,676.32,500.00,0.00
,676.30,500.07,0.00,676.32,500.00,0.00
,676.32,500.06,0.00,676.32,500.00,0.00
,676.32,500.07,-0.01,676.32,500.00,0.00
,689.47,500.69,0.00,689.47,500.00,0.00
,689.49,500.07,0.00,689.47,500.00,0.00
,689.47,500.08,0.00,689.47,500.00,0.00
,689.47,500.07,0.01,689.47,500.00,0.00
,689.46,500.07,0.00,689.47,500.00,0.00
,689.47,500.06,0.00,689.47,500.00,0.00
,689.47,500.07,-0.01,689.47,500.00,0.00
,702.63,500.69,0.00,702.63,500.00,0.00
,702.64,500.07,0.00,702.63,500.00,0.00
,702.63,500.08,0.00,702.63,500.00,0.00
,702.63,500.07,0.01,702.63,500.00,0.00
,702.62,500.07,0.00,702.63,500.00,0.00
,702.63,500.06,0.00,702.63,500.00,0.00
,702.63,500.07,-0.01,702.63,500.00,0.00
,715.79,500.69,0.00,715.79,500.00,0.00
,715.80,500.07,0.00,715.79,500.00,0.00
,715.79,500.08,0.00,715.79,500.00,0.00
,715.79,500.07,0.01,715.79,500.00,0.00
,715.78,500.07,0.00,715.79,500.00,0.00
,715.79,500.06,0.00,715.79,500.00,0.00
,715.79,500.07,-0.01,715.79,500.00,0.00
,728.95,500.69,0.00,728.95,500.00,0.00
,728.96,500.07,0.00,728.95,500.00,0.00
,728.95,500.08,0.00,728.95,500.00,0.00
,728.95,500.07,0.01,728.95,500.00,0.00
,728.94,500.07,0.00,728.95,500.00,0.00
,728.95,500.06,0.00,728.95,500.00,0.00
,728.95,500.07,-0.01,728.95,500.00,0.00
,742.11,500.69,0.00,742.11,500.00,0.00
,742.12,500.07,0.00,742.11,500.00,0.00
,742.11,500.08,0.00,742.11,500.00,0.00
,742.11,500.07,0.01,742.11,500.00,0.00
,742.09,500.07,0.00,742.11,500.00,0.00
,742.11,500.06,0.00,742.11,500.00,0.00
,742.11,500.07,-0.01,742.11,500.00,0.00
,755.26,500.69,0.00,755.26,500.00,0.00
,755.27,500.07,0.00,755.26,500.00,0.00
,755.26,500.08,0.00,755.26,500.00,0.00
,755.26,500.07,0.01,755.26,500.00,0.00
,755.25,500.07,0.00,755.26,500.00,0.00
,755.26,500.06,0.00,755.26,500.00,0.00
,755.26,500.07,-0.01,755.26,500.00,0.00
,768.42,500.69,0.00,768.42,500.00,0.00
,768.43,500.07,0.00,768.42,500.00,0.00
,768.42,500.08,0.00,768.42,500.00,0.00
,768.42,500.07,0.01,768.42,500.00,0.00
,768.41,500.07,0.00,768.42,500.00,0.00
,768.42,500.06,0.00,768.42,500.00,0.00
,768.42,500.07,-0.01,768.42,500.00,0.00
,781.58,500.69,0.00,781.58,500.00,0.00
,781.59,500.07,0.00,781.58,500.00,0.00
,781.58,500.08,0.00,781.58,500.00,0.00
,781.58,500.07,0.01,781.58,500.00,0.00
,781.57,500.07,0.00,781.58,500.00,0.00
,781.58,500.06,0.00,781.58,500.00,0.00
,781.58,500.07,-0.01,781.58,500.00,0.00
,794.74,500.69,0.00,794.74,500.00,0.00
,794.75,500.07,0.00,794.74,500.00,0.00
,794.74,500.08,0.00,794.74,500.00,0.00
,794.74,500.07,0.01,794.74,500.00,0.00
,794.73,500.07,0.00,794.74,500.00,0.00
,794.74,500.06,0.00,794.74,500.00,0.00
,794.74,500.07,-0.01,794.74,500.00,0.00
,807.89,500.69,0.00,807.89,500.00,0.00
,807.91,500.07,0.00,807.89,500.00,0.00
,807.89,500.08,0.00,807.89,500.00,0.00
,807.89,500.07,0.01,807.89,500.00,0.00
,807.88,500.07,0.00,807.89,500.00,0.00
,807.89,500.06,0.00,807.89,500.00,0.00
,807.89,500.07,-0.01,807.89,500.00,0.00
,821.05,500.69,0.00,821.05,500.00,0.00
,821.06,500.07,0.00,821.05,500.00,0.00
,821.05,500.08,0.00,821.05,500.00,0.00
,821.05,500.07,0.01,821.05,500.00,0.00
,821.04,500.07,0.00,821.05,500.00,0.00
,821.05,500.06,0.00,821.05,500.00,0.00
,821.05,500.07,-0.01,821.05,500.00,0.00
,834.21,500.69,0.00,834.21,500.00,0.00
,834.22,500.07,0.00,834.21,500.00,0.00
,834.21,500.08,0.00,834.21,500.00,0.00
,834.21,500.07,0.01,834.21,500.00,0.00
,834.20,500.07,0.00,834.21,500.00,0.00
,834.21,500.06,0.00,834.21,500.00,0.00
,834.21,500.07,-0.01,834.21,500.00,0.00
,847.37,500.69,0.00,847.37,500.00,0.00
,847.38,500.07,0.00,847.37,500.00,0.00
,847.37,500.08,0.00,847.37,500.00,0.00
,847.37,500.07,0.01,847.37,500.00,0.00
,847.36,500.07,0.00,847.37,500.00,0.00
,847.37,500.06,0.00,847.37,500.00,0.00
,847.37,500.07,-0.01,847.37,500.00,0.00
,860.53,500.69,0.00,860.53,500.00,0.00
,860.54,500.07,0.00,860.53,500.00,0.00
,860.53,500.08,0.00,860.53,500.00,0.00
,860.53,500.07,0.01,860.53,500.00,0.00
,860.51,500.07,0.00,860.53,500.00,0.00
,860.53,500.06,0.00,860.53,500.00,0.00
,860.53,500.07,-0.01,860.53,500.00,0.00
,873.68,500.69,0.00,873.68,500.00,0.00
,873.70,500.07,0.00,873.68,500.00,0.00
,873.68,500.08,0.00,873.68,500.00,0.00
,873.68,500.07,0.01,873.68,500.00,0.00
,873.67,500.07,0.00,873.68,500.00,0.00
,873.68,500.06,0.00,873.68,500.00,0.00
,873.68,500.07,-0.01,873.68,500.00,0.00
,886.84,500.69,0.00,886.84,500.00,0.00
,886.85,500.07,0.00,886.84,500.00,0.00
,886.84,500.08,0.00,886.84,500.00,0.00
,886.84,500.07,0.01,886.84,500.00,0.00
,886.83,500.07,0.00,886.84,500.00,0.00
,886.84,500.06,0.00,886.84,500.00,0.00
,886.84,500.07,-0.01,886.84,500.00,0.00
,900.00,500.69,0.00,900.00,500.00,0.00
,900.01,500.07,0.00,900.00,500.00,0.00
,900.00,500.08,0.00,900.00,500.00,0.00
,900.00,500.07,0.01,900.00,500.00,0.00
,899.99,500.07,0.00,900.00,500.00,0.00
,900.00,500.06,0.00,900.00,500.00,0.00
,900.00,500.07,-0.01,900.00,500.00,0.00
,900.00,500.69,0.00,900.00,500.00,0.00
,900.01,500.07,0.00,900.00,500.00,0.00
,900.00,500.08,0.00,900.00,500.00,0.00
,900.00,500.07,0.01,900.00,500.00,0.00
,899.99,500.07,0.00,900.00,500.00,0.00
,900.00,500.06,0.00,900.00,500.00,0.00
,900.00,500.07,-0.01,900.00,500.00,0.00
,900.00,500.69,0.00,400.00,500.69,0.00
,200.00,602.81,0.00,200.00,500.00,0.00
,201.71,510.28,0.00,200.00,500.00,0.00
,200.00,511.99,0.00,200.00,500.00,0.00
,200.00,510.28,1.71,200.00,500.00,0.00
,198.29,510.28,0.00,200.00,500.00,0.00
,200.00,508.57,0.00,200.00,500.00,0.00
,200.00,510.28,-1.71,200.00,500.00,0.00
,0.00,10.00,0.00,400.00,10.00,0.00
,0.00,10.00,0.00,500.00,10.00,0.00
,369.98,0.00,-30.02,430.02,0.00,-30.02
,430.02,0.00,-30.02,430.02,0.00,30.02
,430.02,0.00,30.02,369.98,0.00,30.02
,369.98,0.00,-30.02,369.98,0.00,30.02
,369.98,-15.01,-30.02,430.02,-15.01,-30.02
,430.02,-15.01,-30.02,430.02,-15.01,30.02
,430.02,-15.01,30.02,369.98,-15.01,30.02
,369.98,-15.01,-30.02,369.98,-15.01,30.02
,369.98,-15.01,-30.02,369.98,0.00,-30.02
,430.02,-15.01,-30.02,430.02,0.00,-30.02
,430.02,-15.01,30.02,430.02,0.00,30.02
,369.98,-15.01,30.02,369.98,0.00,30.02
,0.00,500.00,0.00,-30.02,439.97,-30.02
,-30.02,439.97,-30.02,30.02,439.97,-30.02
,30.02,439.97,-30.02,0.00,500.00,0.00
,30.02,439.97,30.02,0.00,500.00,0.00
,30.02,439.97,30.02,-30.02,439.97,30.02
,-30.02,439.97,30.02,0.00,500.00,0.00
,-30.02,439.97,-30.02,-30.02,439.97,30.02
,30.02,439.97,-30.02,30.02,439.97,30.02
,869.98,500.00,-30.02,930.02,500.00,-30.02
,930.02,500.00,-30.02,930.02,500.00,30.02
,930.02,500.00,30.02,869.98,500.00,30.02
,869.98,500.00,-30.02,869.98,500.00,30.02
,869.98,484.99,-30.02,930.02,484.99,-30.02
,930.02,484.99,-30.02,930.02,484.99,30.02
,930.02,484.99,30.02,869.98,484.99,30.02
,869.98,484.99,-30.02,869.98,484.99,30.02
,869.98,484.99,-30.02,869.98,500.00,-30.02
,930.02,484.99,-30.02,930.02,500.00,-30.02
,930.02,484.99,30.02,930.02,500.00,30.02
,869.98,484.99,30.02,869.98,500.00,30.02
,369.98,800.00,-30.02,430.02,800.00,-30.02
,430.02,800.00,-30.02,430.02,800.00,30.02
,430.02,800.00,30.02,369.98,800.00,30.02
,369.98,800.00,-30.02,369.98,800.00,30.02
,369.98,784.99,-30.02,430.02,784.99,-30.02
,430.02,784.99,-30.02,430.02,784.99,30.02
,430.02,784.99,30.02,369.98,784.99,30.02
,369.98,784.99,-30.02,369.98,784.99,30.02
,369.98,784.99,-30.02,369.98,800.00,-30.02
,430.02,784.99,-30.02,430.02,800.00,-30.02
,430.02,784.99,30.02,430.02,800.00,30.02
,369.98,784.99,30.02,369.98,800.00,30.02
 ];
colores = [ 0,0,0,0,0,0
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,1.00,0,0.00,1.00
,0,0.00,1.00,0,0.00,1.00
,0,0.00,1.00,0,0.00,1.00
,0,0.00,1.00,0,0.00,1.00
,0,0.00,1.00,0,0.00,1.00
,0,0.00,1.00,0,0.00,1.00
,0,0.00,1.00,0,0.00,1.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,0,0.00,1.00,0,0.00,1.00
,0,0.00,1.00,0,0.00,1.00
,0,0.00,1.00,0,0.00,1.00
,0,0.00,1.00,0,0.00,1.00
,0,0.00,1.00,0,0.00,1.00
,0,0.00,1.00,0,0.00,1.00
,0,0.00,1.00,0,0.00,1.00
,1,0.00,0.00,1,0.00,0.00
,1,0.00,0.00,1,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
,0,0.00,0.00,0,0.00,0.00
 ]; 
var geometry = new THREE.BufferGeometry();

geometry.setAttribute('position', new THREE.BufferAttribute(new Float32Array(vertices), 3));
geometry.setAttribute('color', new THREE.BufferAttribute(new Float32Array(colores), 3));

// aqui termina la creacion de lineas, que se insertan en la escena ahora
// que pasa si cda tramo tiene un color distinto?

var line = new THREE.LineSegments(geometry, material);
scene.add(line);



//

window.addEventListener( 'resize', onWindowResize, false );

}
// Fin del init


function onWindowResize() {

    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();

    renderer.setSize( window.innerWidth, window.innerHeight );

  }

  //

  function handleController( controller ) {

    var userData = controller.userData;
    var painter = userData.painter;

    var pivot = controller.getObjectByName( 'pivot' );

    if ( userData.isSqueezing === true ) {

      var delta = ( controller.position.y - userData.positionAtSqueezeStart ) * 5;
      var scale = Math.max( 0.1, userData.scaleAtSqueezeStart + delta );

      pivot.scale.setScalar( scale );
      painter.setSize( scale );

    }

    cursor.setFromMatrixPosition( pivot.matrixWorld );

    if ( userData.isSelecting === true ) {

       painter.lineTo( cursor );
       painter.update();

    } else {

       painter.moveTo( cursor );

    }

  }


  function animate() {

    renderer.setAnimationLoop( render );

  }

  function render() {

     handleController( controller1 );
     handleController( controller2 );

    renderer.render( scene, camera );

  }

</script>
</body>
</html>
